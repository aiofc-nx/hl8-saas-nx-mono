#!/bin/bash
# HL8 SAAS 平台快速构建验证脚本
# 利用 Nx 的依赖图自动按正确顺序构建

set -e  # 遇到错误立即退出

echo "🚀 开始快速构建验证（利用 Nx 依赖图）..."
echo "=================================================="

# Nx 会自动分析依赖关系并按正确顺序构建
echo ""
echo "📦 构建所有项目（Nx 自动处理依赖顺序）..."
echo "--------------------------------------------------"

# 构建所有库（Nx 会自动按依赖顺序）
nx run-many -t build -p \
  config \
  logger \
  utils \
  core \
  database \
  common \
  multi-tenancy \
  fastify-pro \
  cache \
  messaging \
  api

echo ""
echo "=================================================="
echo "🎉 所有项目构建验证成功！"
echo "=================================================="

