---
description: HL8 SAASå¹³å° AIåŠ©æ‰‹å¼€å‘è§„èŒƒ
globs:
alwaysApply: true
---

# HL8 SAAS å¹³å° AI åŠ©æ‰‹å¼€å‘è§„èŒƒ

> **ç‰ˆæœ¬**: 2.0.0 | **æ›´æ–°**: 2025-10-01 | **å®Œæ•´æ–‡æ¡£**: [docs/guidelines/](../../../docs/guidelines/)

---

## ğŸ¯ é¡¹ç›®æ¶æ„

### æ··åˆæ¶æ„ = Clean Architecture + DDD + CQRS + ES + EDA

```
Interface â†’ Application â†’ Domain
     â†“           â†“
Infrastructure â†â”˜
```

**æŠ€æœ¯æ ˆ**: TypeScript + NestJS + Fastify + Nx + pnpm + PostgreSQL + Redis

---

## ğŸ—ï¸ æ ¸å¿ƒåŸåˆ™

### 1. å……è¡€æ¨¡å‹ï¼ˆå¿…é¡»éµå¾ªï¼‰

**ä¸šåŠ¡é€»è¾‘åœ¨å®ä½“å†…ï¼ŒæœåŠ¡å±‚åªåè°ƒ**

```typescript
// âœ… å……è¡€æ¨¡å‹
class User extends BaseEntity {
  private status: UserStatus;
  
  activate(): void {
    if (this.status !== UserStatus.Pending) {
      throw new UserNotPendingException();
    }
    this.status = UserStatus.Active;
    this.addDomainEvent(new UserActivatedEvent(this.id));
  }
}

// âŒ è´«è¡€æ¨¡å‹ï¼ˆç¦æ­¢ï¼‰
class User { setStatus(status: string): void { } }
class UserService { activate(user: User) { /* ä¸šåŠ¡é€»è¾‘ */ } }  // âŒ
```

### 2. å¸¸é‡ç®¡ç†ï¼ˆå¿…é¡»éµå¾ªï¼‰

**æ¯ä¸ªé¡¹ç›®å¿…é¡»åˆ›å»º constants.tsï¼Œä½¿ç”¨å‘½åç©ºé—´**

```typescript
// âœ… æ­£ç¡®
export const DI_TOKENS = {
  MODULE_OPTIONS: 'MODULE_OPTIONS',
} as const;

import { DI_TOKENS } from './constants';
@Inject(DI_TOKENS.MODULE_OPTIONS)

// âŒ ç¦æ­¢ç¡¬ç¼–ç 
@Inject('MODULE_OPTIONS')  // âŒ
```

### 3. TSDoc æ³¨é‡Šï¼ˆå¿…é¡»å®Œæ•´ï¼‰

```typescript
/**
 * {åŠŸèƒ½ç®€è¿°}
 *
 * @description {è¯¦ç»†æè¿°}
 *
 * ## ä¸šåŠ¡è§„åˆ™
 * - {è§„åˆ™}
 *
 * @param {å‚æ•°} - {è¯´æ˜}
 * @returns {è¿”å›å€¼}
 * @throws {å¼‚å¸¸} {è¯´æ˜}
 * @example
 * ```typescript
 * {ç¤ºä¾‹}
 * ```
 * @since 1.0.0
 */
```

**ç¦ç”¨**: @created, @author, @version

### 4. é›¶æŠ€æœ¯å€º

- âŒ ä¸ä¿ç•™å‘åå…¼å®¹ä»£ç 
- âŒ ä¸ä½¿ç”¨ deprecated
- âœ… å§‹ç»ˆä½¿ç”¨æœ€ä½³å®è·µ

---

## ğŸ·ï¸ å‘½åè§„èŒƒé€ŸæŸ¥

| ç±»å‹ | è§„èŒƒ | ç¤ºä¾‹ |
|------|------|------|
| æ–‡ä»¶ | kebab-case | `user.service.ts` |
| å˜é‡ | camelCase | `userName` |
| å¸¸é‡ | UPPER_SNAKE_CASE | `MAX_RETRIES` |
| å‡½æ•° | camelCase+åŠ¨è¯ | `createUser()` |
| ç±» | PascalCase | `UserService` |
| æ¥å£ | I+PascalCase | `IUserService` |

---

## ğŸ”’ TypeScript ä¸¥æ ¼æ¨¡å¼

```json
{ "strict": true, "noImplicitAny": true }
```

- âŒ ç¦æ­¢ any
- âœ… ä½¿ç”¨æ³›å‹æˆ– unknown
- âœ… å¸¸é‡ä½¿ç”¨ as const

---

## ğŸ“‚ æ–‡ä»¶ç»“æ„

```
packages/{module}/src/lib/
â”œâ”€â”€ constants.ts       # å¿…éœ€
â”œâ”€â”€ {module}.module.ts
â”œâ”€â”€ {module}.service.ts
â”œâ”€â”€ entities/          # å……è¡€æ¨¡å‹å®ä½“
â”œâ”€â”€ types/
â””â”€â”€ ...
```

### å¯¼å…¥é¡ºåº

```typescript
// 1. Node.jså†…ç½® â†’ 2. å¤–éƒ¨ä¾èµ– â†’ 3. è·¨åŒ…ä¾èµ– â†’ 4. ç›¸å¯¹å¯¼å…¥
```

---

## âœ… ä»£ç ç”Ÿæˆæ£€æŸ¥æ¸…å•

### å……è¡€æ¨¡å‹

- [ ] ä¸šåŠ¡é€»è¾‘åœ¨å®ä½“å†…
- [ ] ç§æœ‰å±æ€§+å…¬å¼€æ–¹æ³•
- [ ] ä½¿ç”¨å€¼å¯¹è±¡
- [ ] å‘å¸ƒé¢†åŸŸäº‹ä»¶
- [ ] ä½¿ç”¨ä¸šåŠ¡è¯­è¨€å‘½å

### ä»£ç è§„èŒƒ

- [ ] æœ‰ constants.ts
- [ ] å®Œæ•´ TSDoc æ³¨é‡Š
- [ ] kebab-case æ–‡ä»¶å
- [ ] æ— ç¡¬ç¼–ç 
- [ ] å¯¼å…¥é¡ºåºæ­£ç¡®

### ç±»å‹å®‰å…¨

- [ ] ä¸¥æ ¼æ¨¡å¼
- [ ] æ—  any
- [ ] ä½¿ç”¨ as const

---

## ğŸš« ç¦æ­¢

- âŒ è´«è¡€æ¨¡å‹ï¼ˆå®ä½“æœ‰ setterï¼‰
- âŒ ç¡¬ç¼–ç å­—ç¬¦ä¸²/æ•°å­—
- âŒ ç¼ºå°‘æ³¨é‡Š
- âŒ ä½¿ç”¨ any
- âŒ é»˜è®¤å¯¼å‡º
- âŒ æœåŠ¡å±‚åŒ…å«ä¸šåŠ¡é€»è¾‘

---

## ğŸ“š å®Œæ•´æ–‡æ¡£

- ğŸ“ [æ¶æ„è®¾è®¡](../../../docs/architecture/)
- ğŸ“‹ [ç¼–ç è§„èŒƒ](../../../docs/guidelines/)
- ğŸ’¡ [å……è¡€æ¨¡å‹å®è·µ](../../../docs/guidelines/02-rich-domain-model-practice.md)
- ğŸ”§ [å¸¸é‡ç®¡ç†](../../../docs/guidelines/03-constants-management.md)
