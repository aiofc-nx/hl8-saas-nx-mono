---
description: HL8 SAASå¹³å° AIåŠ©æ‰‹å¼€å‘è§„èŒƒ
globs:
alwaysApply: true
---
# HL8 SAAS å¹³å° AI åŠ©æ‰‹æç¤ºè¯å·¥ç¨‹

> **ç‰ˆæœ¬**: 1.0.0 | **åˆ›å»ºæ—¥æœŸ**: 2025-01-27 | **ç”¨é€”**: AIåŠ©æ‰‹å¼€å‘æŒ‡å¯¼

---

## ğŸ“‹ ç›®å½•

- [1. é¡¹ç›®æ¦‚è¿°](#1-é¡¹ç›®æ¦‚è¿°)
- [2. æ¶æ„è®¾è®¡æç¤ºè¯](#2-æ¶æ„è®¾è®¡æç¤ºè¯)
- [3. å¼€å‘è§„èŒƒæç¤ºè¯](#3-å¼€å‘è§„èŒƒæç¤ºè¯)
- [4. æœ¯è¯­å®šä¹‰æç¤ºè¯](#4-æœ¯è¯­å®šä¹‰æç¤ºè¯)
- [5. ä»£ç ç”Ÿæˆæç¤ºè¯](#5-ä»£ç ç”Ÿæˆæç¤ºè¯)
- [6. æœ€ä½³å®è·µæç¤ºè¯](#6-æœ€ä½³å®è·µæç¤ºè¯)
- [7. AIåŠ©æ‰‹ä½¿ç”¨æŒ‡å—](#7-aiåŠ©æ‰‹ä½¿ç”¨æŒ‡å—)

---

## 1. é¡¹ç›®æ¦‚è¿°

### 1.1 é¡¹ç›®åŸºæœ¬ä¿¡æ¯

**é¡¹ç›®åç§°**: HL8 SAAS å¹³å°  
**æ¶æ„æ¨¡å¼**: æ··åˆæ¶æ„ = Clean Architecture + DDD + CQRS + äº‹ä»¶æº¯æºï¼ˆESï¼‰+ äº‹ä»¶é©±åŠ¨æ¶æ„ï¼ˆEDAï¼‰  
**æŠ€æœ¯æ ˆ**: TypeScript + NestJS + Fastify + Pino + Nx + pnpm + PostgreSQL + MongoDB + MikroORM + Redis  
**é¡¹ç›®ç±»å‹**: Monorepo å¤šç§Ÿæˆ· SAAS å¹³å°  

### 1.2 æ ¸å¿ƒè®¾è®¡åŸåˆ™

1. **å……è¡€æ¨¡å‹**: ä¸šåŠ¡é€»è¾‘åœ¨å®ä½“å†…ï¼ŒæœåŠ¡å±‚åªåè°ƒ
2. **åˆ†å±‚æ¶æ„**: Interface â†’ Application â†’ Domain â†’ Infrastructure
3. **CQRS**: å‘½ä»¤æŸ¥è¯¢èŒè´£åˆ†ç¦»ï¼Œå‘½ä»¤ç«¯å¤„ç†å†™æ“ä½œï¼ŒæŸ¥è¯¢ç«¯å¤„ç†è¯»æ“ä½œ
4. **äº‹ä»¶æº¯æºï¼ˆESï¼‰**: èšåˆçŠ¶æ€é€šè¿‡äº‹ä»¶æµé‡å»ºï¼Œæ”¯æŒå®Œæ•´çš„å®¡è®¡è¿½è¸ªå’Œå†å²æŸ¥è¯¢
5. **äº‹ä»¶é©±åŠ¨**: é€šè¿‡é¢†åŸŸäº‹ä»¶å®ç°æ¾è€¦åˆ
6. **å¤šç§Ÿæˆ·**: å®Œæ•´çš„å¤šç§Ÿæˆ·æ¶æ„æ”¯æŒ
7. **ç±»å‹å®‰å…¨**: ä¸¥æ ¼çš„TypeScriptç±»å‹ç³»ç»Ÿ
8. **å®ä½“ä¸èšåˆæ ¹åˆ†ç¦»**: ä¸šåŠ¡å®ä½“ä¸èšåˆæ ¹åˆ†ç¦»ï¼Œä¸èƒ½ç”¨èšåˆæ ¹æ›¿ä»£ä¸šåŠ¡å®ä½“ï¼Œä¸šåŠ¡å®ä½“ä½œä¸ºèšåˆæ ¹çš„å†…éƒ¨å®ä½“
9. **å®ä½“å¼€å‘éµå¾ªå……è¡€æ¨¡å‹æ¨¡å¼**: æ‰€æœ‰å®ä½“å¿…é¡»éµå¾ªå……è¡€æ¨¡å‹ï¼ŒåŒ…å«å®Œæ•´çš„ä¸šåŠ¡é€»è¾‘å’Œæ–¹æ³•

### 1.3 é¡¹ç›®ç»“æ„

```text
hl8-saas-nx-mono/
â”œâ”€â”€ apps/                    # åº”ç”¨ç¨‹åº
â”‚   â”œâ”€â”€ api/                # APIåº”ç”¨ç¨‹åº
â”‚   â””â”€â”€ api-e2e/            # APIç«¯åˆ°ç«¯æµ‹è¯•
â”œâ”€â”€ packages/               # å…±äº«åº“åŒ…
â”‚   â”œâ”€â”€ cache/              # ç¼“å­˜æ¨¡å—
â”‚   â”œâ”€â”€ common/             # é€šç”¨æ¨¡å—
â”‚   â”œâ”€â”€ config/             # é…ç½®æ¨¡å—
â”‚   â”œâ”€â”€ database/           # æ•°æ®åº“æ¨¡å—
â”‚   â”œâ”€â”€ fastify-pro/        # ä¼ä¸šçº§Fastifyé›†æˆ
â”‚   â”œâ”€â”€ hybrid-archi/       # æ··åˆæ¶æ„æ ¸å¿ƒæ¨¡å—
â”‚   â”œâ”€â”€ logger/             # æ—¥å¿—æ¨¡å—
â”‚   â”œâ”€â”€ messaging/          # æ¶ˆæ¯æ¨¡å—
â”‚   â”œâ”€â”€ multi-tenancy/      # å¤šç§Ÿæˆ·æ¶æ„æ¨¡å—
â”‚   â”œâ”€â”€ saas-core/          # SAASæ ¸å¿ƒä¸šåŠ¡æ¨¡å—
â”‚   â””â”€â”€ utils/              # å·¥å…·æ¨¡å—
â”œâ”€â”€ docs/                   # é¡¹ç›®æ–‡æ¡£
â””â”€â”€ examples/               # ç¤ºä¾‹ä»£ç 
```

---

## 2. æ¶æ„è®¾è®¡æç¤ºè¯

### 2.1 æ··åˆæ¶æ„æ¨¡å¼

**æ ¸å¿ƒæç¤ºè¯**:

```text
æœ¬é¡¹ç›®é‡‡ç”¨æ··åˆæ¶æ„æ¨¡å¼ï¼Œå°†äº”ç§å¼ºå¤§çš„æ¶æ„æ¨¡å¼æœ‰æœºç»“åˆï¼š
- Clean Architecture: æä¾›æ¸…æ™°çš„åˆ†å±‚æ¶æ„å’Œä¾èµ–æ–¹å‘
- Domain-Driven Design (DDD): æä¾›å……è¡€æ¨¡å‹å’Œé¢†åŸŸå»ºæ¨¡
- Command Query Responsibility Segregation (CQRS): åˆ†ç¦»å‘½ä»¤å’ŒæŸ¥è¯¢èŒè´£
- Event Sourcing (ES): æä¾›äº‹ä»¶æº¯æºèƒ½åŠ›
- Event-Driven Architecture (EDA): æä¾›äº‹ä»¶é©±åŠ¨æ¶æ„

æ¶æ„åˆ†å±‚ï¼š
Interface Layer (æ¥å£å±‚) â†’ Application Layer (åº”ç”¨å±‚) â†’ Domain Layer (é¢†åŸŸå±‚) â†’ Infrastructure Layer (åŸºç¡€è®¾æ–½å±‚)

ä¾èµ–æ–¹å‘ï¼šå¤–å±‚ä¾èµ–å†…å±‚ï¼Œå†…å±‚ä¸ä¾èµ–å¤–å±‚

CQRSæ¶æ„è¦æ±‚ï¼š
- å‘½ä»¤ç«¯ (Command Side): å¤„ç†å†™æ“ä½œï¼Œé€šè¿‡èšåˆæ ¹æ‰§è¡Œä¸šåŠ¡é€»è¾‘
- æŸ¥è¯¢ç«¯ (Query Side): å¤„ç†è¯»æ“ä½œï¼Œé€šè¿‡è¯»æ¨¡å‹æä¾›æ•°æ®
- å‘½ä»¤å¤„ç†å™¨: æ¥æ”¶å‘½ä»¤ï¼ŒéªŒè¯ä¸šåŠ¡è§„åˆ™ï¼Œæ‰§è¡Œèšåˆæ ¹æ“ä½œ
- æŸ¥è¯¢å¤„ç†å™¨: æ¥æ”¶æŸ¥è¯¢ï¼Œä»è¯»æ¨¡å‹è¿”å›æ•°æ®
- å‘½ä»¤æŸ¥è¯¢åˆ†ç¦»: å‘½ä»¤å’ŒæŸ¥è¯¢ä½¿ç”¨ä¸åŒçš„æ•°æ®æ¨¡å‹å’Œæ¥å£

äº‹ä»¶æº¯æºï¼ˆESï¼‰æ¶æ„è¦æ±‚ï¼š
- äº‹ä»¶å­˜å‚¨: æ‰€æœ‰é¢†åŸŸäº‹ä»¶æŒä¹…åŒ–åˆ°äº‹ä»¶å­˜å‚¨
- çŠ¶æ€é‡å»º: èšåˆæ ¹èƒ½å¤Ÿä»äº‹ä»¶æµé‡å»ºå½“å‰çŠ¶æ€
- äº‹ä»¶ç‰ˆæœ¬: æ”¯æŒäº‹ä»¶ç‰ˆæœ¬ç®¡ç†å’Œå‘åå…¼å®¹
- å¿«ç…§æœºåˆ¶: æ”¯æŒèšåˆçŠ¶æ€çš„å¿«ç…§ï¼Œæé«˜é‡å»ºæ€§èƒ½
- å®¡è®¡è¿½è¸ª: å®Œæ•´çš„äº‹ä»¶å†å²è®°å½•ï¼Œæ”¯æŒå®¡è®¡å’Œè°ƒè¯•

é¢†åŸŸå±‚åŠŸèƒ½ç»„ä»¶è¦æ±‚ï¼š
- å®ä½“ (Entities): ä¸šåŠ¡å®ä½“ä¸èšåˆæ ¹åˆ†ç¦»ï¼Œå®ä½“ä½œä¸ºèšåˆæ ¹çš„å†…éƒ¨å®ä½“
- èšåˆæ ¹ (Aggregate Roots): ç®¡ç†èšåˆä¸€è‡´æ€§è¾¹ç•Œï¼Œåè°ƒå†…éƒ¨å®ä½“æ“ä½œï¼Œæ”¯æŒäº‹ä»¶æº¯æº
- å€¼å¯¹è±¡ (Value Objects): ä¸å¯å˜å¯¹è±¡ï¼Œå°è£…ä¸šåŠ¡æ¦‚å¿µå’ŒéªŒè¯é€»è¾‘
- é¢†åŸŸæœåŠ¡ (Domain Services): å¤„ç†è·¨å®ä½“çš„å¤æ‚ä¸šåŠ¡é€»è¾‘
- é¢†åŸŸäº‹ä»¶ (Domain Events): è¡¨ç¤ºé¢†åŸŸå†…é‡è¦ä¸šåŠ¡å˜åŒ–çš„äº‹ä»¶ï¼Œæ”¯æŒäº‹ä»¶æº¯æº
- ä¸šåŠ¡è§„åˆ™ (Business Rules): é¢†åŸŸå†…çš„ä¸šåŠ¡è§„åˆ™å’Œçº¦æŸ
- ä»“å‚¨æ¥å£ (Repository Interfaces): å®šä¹‰æ•°æ®è®¿é—®å¥‘çº¦ï¼Œæ”¯æŒäº‹ä»¶å­˜å‚¨
- å·¥å‚ (Factories): åˆ›å»ºå¤æ‚å¯¹è±¡çš„å·¥å‚æ–¹æ³•
- å‘½ä»¤å¯¹è±¡ (Commands): å°è£…å†™æ“ä½œçš„è¾“å…¥å‚æ•°
- æŸ¥è¯¢å¯¹è±¡ (Queries): å°è£…è¯»æ“ä½œçš„è¾“å…¥å‚æ•°

åŒ…èŒè´£åˆ†å·¥ï¼š

**æ ¸å¿ƒæ¶æ„åŒ…ï¼ˆhybrid-archiï¼‰**ï¼š
- **hybrid-archi**: æ··åˆæ¶æ„æ ¸å¿ƒæ¨¡å—ï¼Œæ˜¯æ‰€æœ‰ä¸šåŠ¡æ¨¡å—å¼€å‘çš„åŸºç¡€
  - ç»Ÿä¸€äº†ä¸šåŠ¡æ¨¡å—å¼€å‘çš„åŸºæœ¬æ¨¡å¼
  - é›†æˆäº†loggerã€configã€cacheã€databaseã€fastify-proã€multi-tenancyã€messagingã€commonã€utilsç­‰è‡ªå®šä¹‰æ¨¡å—
  - æä¾›æ··åˆæ¶æ„å¼€å‘æ‰€éœ€è¦çš„é€šç”¨åŠŸèƒ½ç»„ä»¶
  - åŒ…å«é¢†åŸŸå±‚ã€åº”ç”¨å±‚ã€åŸºç¡€è®¾æ–½å±‚åŸºç¡€ç»„ä»¶
  - ä¸šåŠ¡æ¨¡å—å¼€å‘å¿…é¡»åŸºäºhybrid-archiçš„ç»“æ„å’Œæ¨¡å¼

**ä¸šåŠ¡æ¨¡å—åŒ…**ï¼š
- **saas-core**: SAASæ ¸å¿ƒä¸šåŠ¡æ¨¡å—ï¼ŒåŒ…å«ç”¨æˆ·ã€ç§Ÿæˆ·ã€ç»„ç»‡ã€éƒ¨é—¨ç­‰ä¸šåŠ¡é¢†åŸŸ
  - å¿…é¡»åŸºäºhybrid-archiå¼€å‘
  - ä¼˜å…ˆä½¿ç”¨hybrid-archiæä¾›çš„é€šç”¨åŠŸèƒ½ç»„ä»¶
  - ä¸èƒ½åç¦»hybrid-archiçš„ç»“æ„å’Œæ¨¡å¼

**åŸºç¡€è®¾æ–½åŒ…ï¼ˆå·²é›†æˆåˆ°hybrid-archiï¼‰**ï¼š
- **multi-tenancy**: å¤šç§Ÿæˆ·æ¶æ„æ¨¡å—ï¼Œæä¾›ç§Ÿæˆ·éš”ç¦»å’Œæ•°æ®åˆ†ç¦»èƒ½åŠ›
- **fastify-pro**: ä¼ä¸šçº§Fastifyé›†æˆï¼Œæä¾›é«˜æ€§èƒ½Webæ¡†æ¶æ”¯æŒ
- **cache**: ç¼“å­˜æ¨¡å—ï¼Œæä¾›Redisç¼“å­˜å’Œåˆ†å¸ƒå¼ç¼“å­˜èƒ½åŠ›
- **messaging**: æ¶ˆæ¯æ¨¡å—ï¼Œæä¾›äº‹ä»¶æ€»çº¿å’Œæ¶ˆæ¯é˜Ÿåˆ—æ”¯æŒ
- **database**: æ•°æ®åº“æ¨¡å—ï¼Œæä¾›æ•°æ®è®¿é—®å’ŒæŒä¹…åŒ–èƒ½åŠ›
- **logger**: æ—¥å¿—æ¨¡å—ï¼Œæä¾›ç»“æ„åŒ–æ—¥å¿—å’Œå®¡è®¡æ—¥å¿—èƒ½åŠ›
- **config**: é…ç½®æ¨¡å—ï¼Œæä¾›ç±»å‹å®‰å…¨çš„é…ç½®ç®¡ç†
- **common**: é€šç”¨æ¨¡å—ï¼Œæä¾›å…±äº«å·¥å…·å’Œé€šç”¨ç»„ä»¶
- **utils**: å·¥å…·æ¨¡å—ï¼Œæä¾›é€šç”¨å·¥å…·å‡½æ•°å’Œè¾…åŠ©æ–¹æ³•
```

### 2.2 å……è¡€æ¨¡å‹è®¾è®¡

**æ ¸å¿ƒæç¤ºè¯**:

```text
ä¸¥æ ¼éµå¾ªå……è¡€æ¨¡å‹è®¾è®¡åŸåˆ™ï¼š

1. ä¸šåŠ¡é€»è¾‘åœ¨å®ä½“å†…ï¼Œä¸åœ¨æœåŠ¡å±‚
2. å®ä½“å…·æœ‰è¡Œä¸ºæ–¹æ³•ï¼Œä¸åªæ˜¯æ•°æ®å®¹å™¨
3. ä½¿ç”¨å€¼å¯¹è±¡å°è£…éªŒè¯é€»è¾‘
4. èšåˆæ ¹ç®¡ç†ä¸€è‡´æ€§è¾¹ç•Œ
5. é¢†åŸŸäº‹ä»¶è®°å½•ä¸šåŠ¡äº‹å®

ç¤ºä¾‹æ¨¡å¼ï¼š

```typescript
class User extends BaseEntity {
  activate(): void {
    if (this.status !== UserStatus.Pending) {
      throw new UserNotPendingException();
    }
    this.status = UserStatus.Active;
    this.addDomainEvent(new UserActivatedEvent(this.id));
  }
}
```

### 2.3 å®ä½“ä¸èšåˆæ ¹åˆ†ç¦»

**æ ¸å¿ƒæç¤ºè¯**:

```text
æœ¬é¡¹ç›®çš„æ ¸å¿ƒè®¾è®¡åŸåˆ™ï¼šå°†å®ä½“å’Œèšåˆæ ¹æ˜ç¡®åˆ†ç¦»

èšåˆæ ¹ï¼ˆç®¡ç†è€…ï¼‰èŒè´£ï¼š
- ç®¡ç†èšåˆä¸€è‡´æ€§è¾¹ç•Œ
- åè°ƒå†…éƒ¨å®ä½“æ“ä½œ
- å‘å¸ƒé¢†åŸŸäº‹ä»¶
- éªŒè¯ä¸šåŠ¡è§„åˆ™
- æ”¯æŒäº‹ä»¶æº¯æºï¼ˆESï¼‰
- æ”¯æŒäº‹ä»¶é©±åŠ¨æ¶æ„ï¼ˆEDAï¼‰
- ç¡®ä¿å¤šç§Ÿæˆ·æ•°æ®éš”ç¦»
- æ”¯æŒCQRSå‘½ä»¤å¤„ç†
- ç»´æŠ¤äº‹ä»¶æµå®Œæ•´æ€§

å®ä½“ï¼ˆè¢«ç®¡ç†è€…ï¼‰èŒè´£ï¼š
- æ‰§è¡Œå…·ä½“ä¸šåŠ¡æ“ä½œ
- ç»´æŠ¤è‡ªèº«çŠ¶æ€
- å®ç°ä¸šåŠ¡é€»è¾‘
- éµå¾ªèšåˆæ ¹æŒ‡ä»¤
- éµå¾ªå……è¡€æ¨¡å‹æ¨¡å¼
- åŒ…å«å®Œæ•´çš„ä¸šåŠ¡æ–¹æ³•
- æ”¯æŒCQRSæŸ¥è¯¢æ“ä½œ
- å“åº”èšåˆæ ¹å‘½ä»¤

è®¾è®¡æ¨¡å¼ï¼š
èšåˆæ ¹ä½œä¸ºç®¡ç†è€…ï¼Œè´Ÿè´£åè°ƒå’Œç®¡ç†å†…éƒ¨å®ä½“
å®ä½“ä½œä¸ºè¢«ç®¡ç†è€…ï¼Œæ‰§è¡Œå…·ä½“çš„ä¸šåŠ¡æ“ä½œ

æ··åˆæ¶æ„æ¨¡å¼è¦æ±‚ï¼š
- CQRS: èšåˆæ ¹æ”¯æŒå‘½ä»¤å¤„ç†ï¼Œå®ä½“æ”¯æŒæŸ¥è¯¢æ“ä½œï¼Œå‘½ä»¤æŸ¥è¯¢å®Œå…¨åˆ†ç¦»
- ES: èšåˆæ ¹å¿…é¡»æ”¯æŒäº‹ä»¶æº¯æºå’ŒçŠ¶æ€é‡å»ºï¼Œæ‰€æœ‰çŠ¶æ€å˜æ›´é€šè¿‡äº‹ä»¶è®°å½•
- EDA: å®ä½“å˜æ›´å¿…é¡»é€šè¿‡é¢†åŸŸäº‹ä»¶é€šçŸ¥ï¼Œæ”¯æŒå¼‚æ­¥äº‹ä»¶å¤„ç†
- å¤šç§Ÿæˆ·: èšåˆæ ¹å¿…é¡»åŒ…å«ç§Ÿæˆ·æ ‡è¯†ï¼Œç¡®ä¿æ•°æ®éš”ç¦»
- äº‹ä»¶å­˜å‚¨: æ‰€æœ‰é¢†åŸŸäº‹ä»¶å¿…é¡»æŒä¹…åŒ–åˆ°äº‹ä»¶å­˜å‚¨
- çŠ¶æ€é‡å»º: èšåˆæ ¹å¿…é¡»èƒ½å¤Ÿä»äº‹ä»¶æµé‡å»ºå®Œæ•´çŠ¶æ€
```

---

## 3. å¼€å‘è§„èŒƒæç¤ºè¯

### 3.1 å¸¸é‡ç®¡ç†è§„èŒƒ

**æ ¸å¿ƒæç¤ºè¯**:

```text
æ¯ä¸ªé¡¹ç›®å¿…é¡»åˆ›å»º constants.tsï¼Œä½¿ç”¨å‘½åç©ºé—´æ–¹å¼ï¼š

export const DI_TOKENS = {
  MODULE_OPTIONS: 'MODULE_OPTIONS',
} as const;

ä½¿ç”¨æ–¹å¼ï¼š
import { DI_TOKENS } from './constants';
@Inject(DI_TOKENS.MODULE_OPTIONS)

ç¦æ­¢ç¡¬ç¼–ç ï¼š

```typescript
@Inject('MODULE_OPTIONS')  // âŒ ç¦æ­¢
```

### 3.2 TSDoc æ³¨é‡Šè§„èŒƒ

**æ ¸å¿ƒæç¤ºè¯**:

```text
ä¸¥æ ¼éµå¾ªTSDocè§„èŒƒï¼Œä½¿ç”¨ä¸­æ–‡æ³¨é‡Šï¼š

/**
 * {åŠŸèƒ½ç®€è¿°}
 *
 * @description {è¯¦ç»†æè¿°}
 *
 * ## ä¸šåŠ¡è§„åˆ™
 * - {è§„åˆ™}
 *
 * @param {å‚æ•°} - {è¯´æ˜}
 * @returns {è¿”å›å€¼}
 * @throws {å¼‚å¸¸} {è¯´æ˜}
 * @example
 * ```typescript
 * {ç¤ºä¾‹}
 * ```
 * @since 1.0.0
 */

ç¦ç”¨æ ‡è®°ï¼š@created, @author, @version
```

### 3.3 å‘½åè§„èŒƒ

**æ ¸å¿ƒæç¤ºè¯**:

```text
æ–‡ä»¶å‘½åï¼škebab-case (user.service.ts)
å˜é‡å‘½åï¼šcamelCase (userName)
å¸¸é‡å‘½åï¼šUPPER_SNAKE_CASE (MAX_RETRIES)
å‡½æ•°å‘½åï¼šcamelCase+åŠ¨è¯ (createUser())
ç±»å‘½åï¼šPascalCase (UserService)
æ¥å£å‘½åï¼šI+PascalCase (IUserService)

TypeScriptä¸¥æ ¼æ¨¡å¼ï¼šå¯ç”¨æ‰€æœ‰ä¸¥æ ¼æ£€æŸ¥
ç¦æ­¢ä½¿ç”¨anyç±»å‹
```

### 3.4 åŒ…å¯¼å…¥è§„èŒƒ

**æ ¸å¿ƒæç¤ºè¯**:

```text
åŒ…å¯¼å…¥é¡ºåºå’Œè§„èŒƒï¼š

1. å¯¼å…¥é¡ºåºï¼š
   - ç¬¬ä¸‰æ–¹åº“å¯¼å…¥
   - é¡¹ç›®å†…éƒ¨åŒ…å¯¼å…¥ï¼ˆæŒ‰ä¾èµ–å±‚çº§ï¼‰
   - ç›¸å¯¹è·¯å¾„å¯¼å…¥

2. åŒ…å¯¼å…¥è§„èŒƒï¼š
   - hybrid-archi: @hl8/hybrid-archi (ä¼˜å…ˆä½¿ç”¨ï¼Œæ ¸å¿ƒæ¶æ„åŒ…)
   - saas-core: @hl8/saas-core
   - multi-tenancy: @hl8/multi-tenancy (å·²é›†æˆåˆ°hybrid-archi)
   - fastify-pro: @hl8/fastify-pro (å·²é›†æˆåˆ°hybrid-archi)
   - cache: @hl8/cache (å·²é›†æˆåˆ°hybrid-archi)
   - messaging: @hl8/messaging (å·²é›†æˆåˆ°hybrid-archi)
   - database: @hl8/database (å·²é›†æˆåˆ°hybrid-archi)
   - logger: @hl8/logger (å·²é›†æˆåˆ°hybrid-archi)
   - config: @hl8/config (å·²é›†æˆåˆ°hybrid-archi)
   - common: @hl8/common (å·²é›†æˆåˆ°hybrid-archi)
   - utils: @hl8/utils (å·²é›†æˆåˆ°hybrid-archi)

3. hybrid-archiä¼˜å…ˆä½¿ç”¨åŸåˆ™ï¼š
   - ä¸šåŠ¡æ¨¡å—å¼€å‘å¿…é¡»ä¼˜å…ˆä½¿ç”¨hybrid-archiæä¾›çš„é€šç”¨åŠŸèƒ½ç»„ä»¶
   - å€¼å¯¹è±¡ã€å®ä½“ã€èšåˆæ ¹ç­‰åŸºç¡€ç»„ä»¶ä¼˜å…ˆä»hybrid-archiå¯¼å…¥
   - ä¸èƒ½åç¦»hybrid-archiçš„ç»“æ„å’Œæ¨¡å¼
   - åªæœ‰åœ¨hybrid-archiæ²¡æœ‰æä¾›æ—¶æ‰è€ƒè™‘ç›´æ¥å¯¼å…¥å…¶ä»–åŸºç¡€è®¾æ–½åŒ…

4. å¯¼å…¥ç¤ºä¾‹ï¼š
```typescript
// ç¬¬ä¸‰æ–¹åº“
import { Injectable } from '@nestjs/common';

// é¡¹ç›®å†…éƒ¨åŒ…ï¼ˆæŒ‰ä¾èµ–å±‚çº§ï¼Œä¼˜å…ˆä½¿ç”¨hybrid-archiï¼‰
import { 
  BaseAggregateRoot, 
  EntityId, 
  BaseEntity,
  BaseValueObject,
  BaseDomainService 
} from '@hl8/hybrid-archi';
import { TenantContext } from '@hl8/multi-tenancy';
import { UserAggregate } from '@hl8/saas-core';

// ç›¸å¯¹è·¯å¾„å¯¼å…¥
import { UserCreatedEvent } from '../events/user-events';
```

---

## 4. æœ¯è¯­å®šä¹‰æç¤ºè¯

### 4.1 ä¸šåŠ¡æœ¯è¯­

**æ ¸å¿ƒæç¤ºè¯**:

```text
å¹³å° (Platform): SAASæœåŠ¡çš„æä¾›å•†ï¼Œè´Ÿè´£å¼€å‘ç³»ç»Ÿã€æä¾›æŠ€æœ¯æ”¯æŒå’Œé€šç”¨çš„å•†ä¸šæœåŠ¡
ç§Ÿæˆ· (Tenant): SAASå¹³å°ä¸­çš„ç‹¬ç«‹å®¢æˆ·å•ä½ï¼Œæ‹¥æœ‰ç‹¬ç«‹çš„æ•°æ®ç©ºé—´å’Œé…ç½®ç¯å¢ƒ
ç»„ç»‡ (Organization): ç§Ÿæˆ·å†…è®¾çš„æ¨ªå‘éƒ¨é—¨ç®¡ç†å•ä½ï¼Œè´Ÿè´£ç®¡ç†ä¸‹å±éƒ¨é—¨çš„ç‰¹å®šèŒèƒ½åŠä¸šåŠ¡ï¼Œç»„ç»‡ä¹‹é—´æ— ä¸Šä¸‹çº§ä»å±å…³ç³»
éƒ¨é—¨ (Department): ç»„ç»‡å†…è®¾çš„çºµå‘ç®¡ç†æœºæ„ï¼Œå…·æœ‰æ˜ç¡®çš„ä¸Šä¸‹çº§ä»å±å…³ç³»
ç”¨æˆ· (User): SAASå¹³å°çš„ä½¿ç”¨è€…ï¼Œæ˜¯ç³»ç»Ÿä¸­æœ€åŸºæœ¬çš„èº«ä»½å•ä½

ç”¨æˆ·åˆ†ç±»ï¼š
- æŒ‰æ¥æºï¼šå¹³å°ç”¨æˆ·ã€ç§Ÿæˆ·ç”¨æˆ·ã€ç³»ç»Ÿç”¨æˆ·
- æŒ‰ç±»å‹ï¼šä¸ªäººç”¨æˆ·ã€ä¼ä¸šç”¨æˆ·ã€ç¤¾ç¾¤ç”¨æˆ·ã€å›¢é˜Ÿç”¨æˆ·
- æŒ‰è§’è‰²ï¼šç®¡ç†å‘˜ç”¨æˆ·ã€æ™®é€šç”¨æˆ·ã€ç³»ç»Ÿç”¨æˆ·
- æŒ‰çŠ¶æ€ï¼šæ´»è·ƒç”¨æˆ·ã€å¾…æ¿€æ´»ç”¨æˆ·ã€ç¦ç”¨ç”¨æˆ·ã€é”å®šç”¨æˆ·ã€è¿‡æœŸç”¨æˆ·
```

### 4.2 æŠ€æœ¯æœ¯è¯­

**æ ¸å¿ƒæç¤ºè¯**:

```text
å®ä½“ (Entity): å…·æœ‰å”¯ä¸€æ ‡è¯†çš„ä¸šåŠ¡å¯¹è±¡ï¼Œå…¶ç›¸ç­‰æ€§åŸºäºæ ‡è¯†ç¬¦è€Œä¸æ˜¯å±æ€§å€¼
èšåˆæ ¹ (Aggregate Root): ç®¡ç†èšåˆä¸€è‡´æ€§è¾¹ç•Œçš„å®ä½“ï¼Œç¡®ä¿èšåˆå†…æ•°æ®çš„ä¸€è‡´æ€§
å€¼å¯¹è±¡ (Value Object): ä¸å¯å˜çš„å¯¹è±¡ï¼Œå…¶ç›¸ç­‰æ€§åŸºäºå±æ€§å€¼è€Œä¸æ˜¯æ ‡è¯†ç¬¦
é¢†åŸŸæœåŠ¡ (Domain Service): å¤„ç†å¤æ‚ä¸šåŠ¡é€»è¾‘çš„æœåŠ¡ï¼Œè¿™äº›é€»è¾‘ä¸å±äºä»»ä½•ç‰¹å®šçš„å®ä½“æˆ–å€¼å¯¹è±¡
é¢†åŸŸäº‹ä»¶ (Domain Event): è¡¨ç¤ºé¢†åŸŸå†…é‡è¦ä¸šåŠ¡å˜åŒ–çš„äº‹ä»¶

å……è¡€æ¨¡å‹ (Rich Domain Model): é¢†åŸŸå¯¹è±¡åŒ…å«ä¸šåŠ¡é€»è¾‘çš„æ¨¡å‹
è´«è¡€æ¨¡å‹ (Anemic Domain Model): é¢†åŸŸå¯¹è±¡åªåŒ…å«æ•°æ®ï¼Œä¸åŒ…å«ä¸šåŠ¡é€»è¾‘çš„æ¨¡å‹ï¼ˆæœ¬é¡¹ç›®ç¦æ­¢ï¼‰
```

---

## 5. ä»£ç ç”Ÿæˆæç¤ºè¯

### 5.1 å®ä½“ç”Ÿæˆæ¨¡æ¿

**æ ¸å¿ƒæç¤ºè¯**:

```text
ç”Ÿæˆå……è¡€æ¨¡å‹å®ä½“æ—¶ï¼Œéµå¾ªä»¥ä¸‹æ¨¡æ¿ï¼š

```typescript
// ä¼˜å…ˆä½¿ç”¨hybrid-archiæä¾›çš„åŸºç¡€ç»„ä»¶
import { BaseEntity, EntityId } from '@hl8/hybrid-archi';
import { EntityStatus, EntityStatusUtils } from '../value-objects/entity-status.vo';
import { EntityCreatedEvent } from '../../events/entity-events';

class EntityName extends BaseEntity {
  private constructor(
    private readonly _id: EntityId,
    private _property: PropertyType,
    private _status: StatusType
  ) {
    super(_id);
  }

  static create(...params): EntityName {
    const entity = new EntityName(...);
    entity.addDomainEvent(new EntityCreatedEvent(...));
    return entity;
  }

  businessMethod(): void {
    this.ensureBusinessRule();
    // ä¸šåŠ¡é€»è¾‘
    this.addDomainEvent(new BusinessEvent(...));
  }

  private ensureBusinessRule(): void {
    if (!this.isValid()) {
      throw new BusinessRuleViolationException();
    }
  }

  // Getteræ–¹æ³•
  getId(): EntityId { return this._id; }
  getStatus(): StatusType { return this._status; }
}
```

### 5.2 èšåˆæ ¹ç”Ÿæˆæ¨¡æ¿

**æ ¸å¿ƒæç¤ºè¯**:

```text
ç”Ÿæˆèšåˆæ ¹æ—¶ï¼Œéµå¾ªä»¥ä¸‹æ¨¡æ¿ï¼š

```typescript
// ä¼˜å…ˆä½¿ç”¨hybrid-archiæä¾›çš„æ··åˆæ¶æ„åŸºç¡€ç»„ä»¶
import { BaseAggregateRoot, EntityId } from '@hl8/hybrid-archi';
import { Entity } from '../entities/entity.entity';
import { EntityCreatedEvent, EntityUpdatedEvent } from '../../events/entity-events';
import { CreateEntityCommand, UpdateEntityCommand } from '../commands/entity-commands';

class EntityAggregate extends BaseAggregateRoot {
  private constructor(
    private readonly _id: EntityId,
    private readonly _tenantId: EntityId,
    private _entity: Entity,
    private _status: EntityStatus
  ) {
    super(_id, _tenantId);
  }

  static create(...params): EntityAggregate {
    const aggregate = new EntityAggregate(...);
    aggregate.addDomainEvent(new EntityCreatedEvent(...));
    return aggregate;
  }

  // èšåˆæ ¹æ–¹æ³•ï¼šåè°ƒå†…éƒ¨å®ä½“æ“ä½œ
  updateEntity(command: UpdateEntityCommand): void {
    this.ensureBusinessRules(command);
    this._entity.update(command.data);
    this.addDomainEvent(new EntityUpdatedEvent(...));
  }

  // èšåˆæ ¹æ–¹æ³•ï¼šç®¡ç†ä¸€è‡´æ€§è¾¹ç•Œ
  private ensureBusinessRules(command: UpdateEntityCommand): void {
    if (!this.canUpdate()) {
      throw new EntityUpdateException();
    }
  }

  // æ”¯æŒäº‹ä»¶æº¯æºï¼šä»äº‹ä»¶æµé‡å»ºçŠ¶æ€
  static fromEvents(events: DomainEvent[]): EntityAggregate {
    const aggregate = new EntityAggregate(...);
    events.forEach(event => aggregate.apply(event));
    return aggregate;
  }

  // æ”¯æŒäº‹ä»¶æº¯æºï¼šåº”ç”¨äº‹ä»¶åˆ°èšåˆæ ¹
  apply(event: DomainEvent): void {
    switch (event.type) {
      case 'EntityCreated':
        this.handleEntityCreated(event);
        break;
      case 'EntityUpdated':
        this.handleEntityUpdated(event);
        break;
      // å…¶ä»–äº‹ä»¶ç±»å‹...
    }
  }

  // æ”¯æŒäº‹ä»¶æº¯æºï¼šè·å–æœªæäº¤çš„äº‹ä»¶
  getUncommittedEvents(): DomainEvent[] {
    return this._uncommittedEvents;
  }

  // æ”¯æŒäº‹ä»¶æº¯æºï¼šæ ‡è®°äº‹ä»¶ä¸ºå·²æäº¤
  markEventsAsCommitted(): void {
    this._uncommittedEvents = [];
  }

  // æ”¯æŒCQRSï¼šå¤„ç†å‘½ä»¤
  handleCommand(command: Command): void {
    this.ensureBusinessRules(command);
    // æ‰§è¡Œå‘½ä»¤é€»è¾‘
    this.addDomainEvent(new CommandProcessedEvent(...));
  }

  // æ”¯æŒå¤šç§Ÿæˆ·
  getTenantId(): EntityId {
    return this._tenantId;
  }
}
```

### 5.3 æœåŠ¡ç”Ÿæˆæ¨¡æ¿

**æ ¸å¿ƒæç¤ºè¯**:

```text
ç”Ÿæˆåº”ç”¨æœåŠ¡æ—¶ï¼Œéµå¾ªä»¥ä¸‹æ¨¡æ¿ï¼š

```typescript
import { Injectable } from '@nestjs/common';
// ä¼˜å…ˆä½¿ç”¨hybrid-archiæä¾›çš„CQRSå’ŒESåŸºç¡€ç»„ä»¶
import { EntityId, IEventStore, IEventBus } from '@hl8/hybrid-archi';
import { IEntityRepository } from '../repositories/entity-repository.interface';
import { EntityAggregate } from '../aggregates/entity.aggregate';
import { CreateEntityCommand, UpdateEntityCommand } from '../commands/entity-commands';
import { GetEntityQuery, GetEntitiesQuery } from '../queries/entity-queries';
import { EntityReadModel } from '../read-models/entity-read-model';

// CQRSå‘½ä»¤å¤„ç†å™¨
@Injectable()
export class EntityCommandHandler {
  constructor(
    private readonly entityRepository: IEntityRepository,
    private readonly eventStore: IEventStore,
    private readonly eventBus: IEventBus
  ) {}

  async handleCreateEntity(command: CreateEntityCommand): Promise<EntityId> {
    // 1. éªŒè¯ä¸šåŠ¡è§„åˆ™
    await this.validateBusinessRules(command);
    
    // 2. åˆ›å»ºèšåˆæ ¹ï¼ˆä¸šåŠ¡é€»è¾‘åœ¨èšåˆæ ¹å†…ï¼‰
    const aggregate = EntityAggregate.create(...);
    
    // 3. ä¿å­˜åˆ°äº‹ä»¶å­˜å‚¨ï¼ˆESï¼‰
    await this.eventStore.saveEvents(aggregate.getId(), aggregate.getUncommittedEvents());
    
    // 4. æ ‡è®°äº‹ä»¶ä¸ºå·²æäº¤
    aggregate.markEventsAsCommitted();
    
    // 5. å‘å¸ƒäº‹ä»¶åˆ°äº‹ä»¶æ€»çº¿ï¼ˆEDAï¼‰
    await this.eventBus.publishAll(aggregate.getUncommittedEvents());
    
    return aggregate.getId();
  }

  async handleUpdateEntity(command: UpdateEntityCommand): Promise<void> {
    // 1. ä»äº‹ä»¶å­˜å‚¨é‡å»ºèšåˆæ ¹çŠ¶æ€ï¼ˆESï¼‰
    const events = await this.eventStore.getEvents(command.entityId);
    const aggregate = EntityAggregate.fromEvents(events);
    
    // 2. æ‰§è¡Œå‘½ä»¤
    aggregate.handleCommand(command);
    
    // 3. ä¿å­˜æ–°äº‹ä»¶åˆ°äº‹ä»¶å­˜å‚¨
    await this.eventStore.saveEvents(aggregate.getId(), aggregate.getUncommittedEvents());
    
    // 4. æ ‡è®°äº‹ä»¶ä¸ºå·²æäº¤
    aggregate.markEventsAsCommitted();
    
    // 5. å‘å¸ƒäº‹ä»¶
    await this.eventBus.publishAll(aggregate.getUncommittedEvents());
  }
}

// CQRSæŸ¥è¯¢å¤„ç†å™¨
@Injectable()
export class EntityQueryHandler {
  constructor(
    private readonly readModelRepository: IReadModelRepository
  ) {}

  async handleGetEntity(query: GetEntityQuery): Promise<EntityReadModel> {
    // ä»è¯»æ¨¡å‹æŸ¥è¯¢æ•°æ®
    return await this.readModelRepository.findById(query.entityId);
  }

  async handleGetEntities(query: GetEntitiesQuery): Promise<EntityReadModel[]> {
    // ä»è¯»æ¨¡å‹æŸ¥è¯¢æ•°æ®åˆ—è¡¨
    return await this.readModelRepository.findByConditions(query.conditions);
  }
}
```

---

## 6. æœ€ä½³å®è·µæç¤ºè¯

### 6.1 å¼€å‘æ£€æŸ¥æ¸…å•

**æ ¸å¿ƒæç¤ºè¯**:

```text
å¼€å‘å®Œæˆåï¼Œæ£€æŸ¥ä»¥ä¸‹é¡¹ç›®ï¼š

å……è¡€æ¨¡å‹ï¼š
- [ ] ä¸šåŠ¡é€»è¾‘åœ¨å®ä½“å†…
- [ ] ç§æœ‰å±æ€§+å…¬å¼€æ–¹æ³•
- [ ] ä½¿ç”¨å€¼å¯¹è±¡
- [ ] å‘å¸ƒé¢†åŸŸäº‹ä»¶
- [ ] ä½¿ç”¨ä¸šåŠ¡è¯­è¨€å‘½å

å®ä½“ä¸èšåˆæ ¹åˆ†ç¦»ï¼š
- [ ] å®ä½“ä½œä¸ºèšåˆæ ¹çš„å†…éƒ¨å®ä½“
- [ ] èšåˆæ ¹ç®¡ç†ä¸€è‡´æ€§è¾¹ç•Œ
- [ ] å®ä½“æ‰§è¡Œå…·ä½“ä¸šåŠ¡æ“ä½œ
- [ ] èšåˆæ ¹æ”¯æŒäº‹ä»¶æº¯æº
- [ ] èšåˆæ ¹æ”¯æŒå¤šç§Ÿæˆ·éš”ç¦»
- [ ] èšåˆæ ¹åè°ƒå†…éƒ¨å®ä½“æ“ä½œ
- [ ] å®ä½“éµå¾ªèšåˆæ ¹æŒ‡ä»¤

æ··åˆæ¶æ„æ¨¡å¼ï¼š
- [ ] æ”¯æŒCQRSå‘½ä»¤å’ŒæŸ¥è¯¢åˆ†ç¦»
- [ ] æ”¯æŒäº‹ä»¶æº¯æºï¼ˆESï¼‰
- [ ] æ”¯æŒäº‹ä»¶é©±åŠ¨æ¶æ„ï¼ˆEDAï¼‰
- [ ] åŒ…å«ç§Ÿæˆ·æ ‡è¯†
- [ ] é¢†åŸŸäº‹ä»¶å®Œæ•´å®šä¹‰
- [ ] ä¸šåŠ¡è§„åˆ™é›†ä¸­ç®¡ç†

CQRSæ¶æ„æ£€æŸ¥ï¼š
- [ ] å‘½ä»¤ç«¯å’ŒæŸ¥è¯¢ç«¯å®Œå…¨åˆ†ç¦»
- [ ] å‘½ä»¤å¤„ç†å™¨å¤„ç†å†™æ“ä½œ
- [ ] æŸ¥è¯¢å¤„ç†å™¨å¤„ç†è¯»æ“ä½œ
- [ ] å‘½ä»¤å¯¹è±¡å°è£…è¾“å…¥å‚æ•°
- [ ] æŸ¥è¯¢å¯¹è±¡å°è£…æŸ¥è¯¢æ¡ä»¶
- [ ] è¯»æ¨¡å‹ç‹¬ç«‹äºå†™æ¨¡å‹
- [ ] å‘½ä»¤å’ŒæŸ¥è¯¢ä½¿ç”¨ä¸åŒæ¥å£

äº‹ä»¶æº¯æºï¼ˆESï¼‰æ£€æŸ¥ï¼š
- [ ] æ‰€æœ‰çŠ¶æ€å˜æ›´é€šè¿‡äº‹ä»¶è®°å½•
- [ ] èšåˆæ ¹æ”¯æŒä»äº‹ä»¶æµé‡å»ºçŠ¶æ€
- [ ] äº‹ä»¶å­˜å‚¨æŒä¹…åŒ–æ‰€æœ‰äº‹ä»¶
- [ ] æ”¯æŒäº‹ä»¶ç‰ˆæœ¬ç®¡ç†
- [ ] æ”¯æŒäº‹ä»¶å¿«ç…§æœºåˆ¶
- [ ] äº‹ä»¶åŒ…å«å®Œæ•´çš„çŠ¶æ€å˜æ›´ä¿¡æ¯
- [ ] æ”¯æŒäº‹ä»¶å›æ”¾å’Œè°ƒè¯•

ä»£ç è§„èŒƒï¼š
- [ ] æœ‰ constants.ts
- [ ] å®Œæ•´ TSDoc æ³¨é‡Š
- [ ] kebab-case æ–‡ä»¶å
- [ ] æ— ç¡¬ç¼–ç 
- [ ] å¯¼å…¥é¡ºåºæ­£ç¡®

åŒ…å¯¼å…¥è§„èŒƒï¼š
- [ ] ç¬¬ä¸‰æ–¹åº“å¯¼å…¥åœ¨å‰
- [ ] é¡¹ç›®å†…éƒ¨åŒ…æŒ‰ä¾èµ–å±‚çº§å¯¼å…¥
- [ ] ä½¿ç”¨æ­£ç¡®çš„åŒ…åˆ«åï¼ˆ@hl8/åŒ…åï¼‰
- [ ] ç›¸å¯¹è·¯å¾„å¯¼å…¥åœ¨å
- [ ] å¯¼å…¥è¯­å¥æŒ‰å­—æ¯é¡ºåºæ’åˆ—
- [ ] é¿å…å¾ªç¯ä¾èµ–
- [ ] åŒ…å¯¼å…¥è·¯å¾„æ­£ç¡®

hybrid-archiä¼˜å…ˆä½¿ç”¨ï¼š
- [ ] ä¼˜å…ˆä½¿ç”¨hybrid-archiæä¾›çš„åŸºç¡€ç»„ä»¶
- [ ] å€¼å¯¹è±¡ã€å®ä½“ã€èšåˆæ ¹ä»hybrid-archiå¯¼å…¥
- [ ] éµå¾ªhybrid-archiçš„ç»“æ„å’Œæ¨¡å¼
- [ ] ä¸åç¦»hybrid-archiçš„æ¶æ„è®¾è®¡
- [ ] ä½¿ç”¨hybrid-archié›†æˆçš„é€šç”¨åŠŸèƒ½ç»„ä»¶
- [ ] ä¸šåŠ¡æ¨¡å—åŸºäºhybrid-archiå¼€å‘

ç±»å‹å®‰å…¨ï¼š
- [ ] ä¸¥æ ¼æ¨¡å¼
- [ ] æ—  any
- [ ] ä½¿ç”¨ as const
```

### 6.2 ç¦æ­¢äº‹é¡¹

**æ ¸å¿ƒæç¤ºè¯**:

```text
ä¸¥æ ¼ç¦æ­¢ä»¥ä¸‹åšæ³•ï¼š

âŒ è´«è¡€æ¨¡å‹ï¼ˆå®ä½“æœ‰ setterï¼‰
âŒ ç¡¬ç¼–ç å­—ç¬¦ä¸²/æ•°å­—
âŒ ç¼ºå°‘æ³¨é‡Š
âŒ ä½¿ç”¨ any
âŒ é»˜è®¤å¯¼å‡º
âŒ æœåŠ¡å±‚åŒ…å«ä¸šåŠ¡é€»è¾‘
âŒ å®ä½“ä¾èµ–ä»“å‚¨
âŒ èšåˆæ ¹å’Œå®ä½“èŒè´£æ··ä¹±
âŒ ç”¨èšåˆæ ¹æ›¿ä»£ä¸šåŠ¡å®ä½“
âŒ å®ä½“ç›´æ¥ä¾èµ–å¤–éƒ¨æœåŠ¡
âŒ èšåˆæ ¹åŒ…å«å…·ä½“ä¸šåŠ¡é€»è¾‘
âŒ å®ä½“ç›´æ¥å‘å¸ƒé¢†åŸŸäº‹ä»¶
âŒ ç¼ºå°‘ç§Ÿæˆ·æ ‡è¯†çš„èšåˆæ ¹
âŒ ä¸æ”¯æŒäº‹ä»¶æº¯æºçš„èšåˆæ ¹
âŒ è¿åå……è¡€æ¨¡å‹çš„å®ä½“è®¾è®¡

CQRSç›¸å…³ç¦æ­¢åšæ³•ï¼š
âŒ å‘½ä»¤å’ŒæŸ¥è¯¢æ··åˆåœ¨åŒä¸€ä¸ªå¤„ç†å™¨ä¸­
âŒ æŸ¥è¯¢å¤„ç†å™¨ä¿®æ”¹æ•°æ®çŠ¶æ€
âŒ å‘½ä»¤å¤„ç†å™¨è¿”å›æŸ¥è¯¢æ•°æ®
âŒ è¯»æ¨¡å‹å’Œå†™æ¨¡å‹å…±äº«ç›¸åŒçš„æ•°æ®ç»“æ„
âŒ å‘½ä»¤å¯¹è±¡åŒ…å«æŸ¥è¯¢é€»è¾‘
âŒ æŸ¥è¯¢å¯¹è±¡åŒ…å«ä¸šåŠ¡é€»è¾‘

äº‹ä»¶æº¯æºï¼ˆESï¼‰ç›¸å…³ç¦æ­¢åšæ³•ï¼š
âŒ ç›´æ¥ä¿®æ”¹èšåˆçŠ¶æ€è€Œä¸è®°å½•äº‹ä»¶
âŒ èšåˆæ ¹ä¸æ”¯æŒäº‹ä»¶é‡å»º
âŒ äº‹ä»¶ä¸åŒ…å«å®Œæ•´çš„çŠ¶æ€å˜æ›´ä¿¡æ¯
âŒ ç¼ºå°‘äº‹ä»¶ç‰ˆæœ¬ç®¡ç†
âŒ ä¸æ”¯æŒäº‹ä»¶å¿«ç…§æœºåˆ¶
âŒ äº‹ä»¶å­˜å‚¨å’Œä¸šåŠ¡é€»è¾‘æ··åˆ

åŒ…å¯¼å…¥ç›¸å…³ç¦æ­¢åšæ³•ï¼š
âŒ ä½¿ç”¨ç›¸å¯¹è·¯å¾„å¯¼å…¥å…¶ä»–åŒ…çš„ä»£ç 
âŒ åŒ…å¯¼å…¥é¡ºåºæ··ä¹±
âŒ ä½¿ç”¨é”™è¯¯çš„åŒ…åˆ«å
âŒ åˆ›å»ºå¾ªç¯ä¾èµ–
âŒ å¯¼å…¥ä¸å¿…è¦çš„åŒ…
âŒ ä½¿ç”¨ç»å¯¹è·¯å¾„å¯¼å…¥é¡¹ç›®å†…éƒ¨åŒ…
âŒ ç¼ºå°‘å¿…è¦çš„åŒ…å¯¼å…¥

hybrid-archiç›¸å…³ç¦æ­¢åšæ³•ï¼š
âŒ ç»•è¿‡hybrid-archiç›´æ¥å¯¼å…¥åŸºç¡€è®¾æ–½åŒ…
âŒ ä¸éµå¾ªhybrid-archiçš„æ¶æ„æ¨¡å¼
âŒ åç¦»hybrid-archiçš„ç»“æ„è®¾è®¡
âŒ é‡å¤å®ç°hybrid-archiå·²æœ‰çš„åŠŸèƒ½
âŒ ä¸šåŠ¡æ¨¡å—ä¸åŸºäºhybrid-archiå¼€å‘
âŒ ä¸ä½¿ç”¨hybrid-archiæä¾›çš„é€šç”¨åŠŸèƒ½ç»„ä»¶
âŒ è¿åhybrid-archiçš„æ··åˆæ¶æ„åŸåˆ™
```

---

## 7. AIåŠ©æ‰‹ä½¿ç”¨æŒ‡å—

### 7.1 ä»£ç ç”ŸæˆæŒ‡å¯¼

å½“ç”¨æˆ·è¯·æ±‚ç”Ÿæˆä»£ç æ—¶ï¼ŒAIåŠ©æ‰‹åº”å½“ï¼š

1. **ç¡®è®¤æ¶æ„æ¨¡å¼**: ç¡®ä¿ç”Ÿæˆçš„ä»£ç ç¬¦åˆæ··åˆæ¶æ„æ¨¡å¼
2. **ä¼˜å…ˆä½¿ç”¨hybrid-archi**: å¿…é¡»ä¼˜å…ˆä½¿ç”¨hybrid-archiæä¾›çš„åŸºç¡€ç»„ä»¶å’Œé€šç”¨åŠŸèƒ½
3. **éµå¾ªhybrid-archiç»“æ„**: ä¸èƒ½åç¦»hybrid-archiçš„ç»“æ„å’Œæ¨¡å¼
4. **åº”ç”¨å……è¡€æ¨¡å‹**: ä¸šåŠ¡é€»è¾‘åœ¨å®ä½“å†…ï¼ŒæœåŠ¡å±‚åªåè°ƒ
5. **éµå¾ªå‘½åè§„èŒƒ**: ä½¿ç”¨é¡¹ç›®è§„å®šçš„å‘½åçº¦å®š
6. **æ·»åŠ å®Œæ•´æ³¨é‡Š**: ä½¿ç”¨TSDocè§„èŒƒï¼ŒåŒ…å«ä¸šåŠ¡è§„åˆ™æè¿°
7. **ä½¿ç”¨å¸¸é‡ç®¡ç†**: é¿å…ç¡¬ç¼–ç ï¼Œä½¿ç”¨constants.ts
8. **ç¡®ä¿ç±»å‹å®‰å…¨**: é¿å…anyï¼Œä½¿ç”¨ä¸¥æ ¼çš„TypeScriptç±»å‹

### 7.2 é—®é¢˜è§£ç­”æŒ‡å¯¼

å½“ç”¨æˆ·è¯¢é—®æ¶æ„æˆ–è§„èŒƒé—®é¢˜æ—¶ï¼ŒAIåŠ©æ‰‹åº”å½“ï¼š

1. **å¼•ç”¨é¡¹ç›®æ–‡æ¡£**: åŸºäºé¡¹ç›®çš„å…·ä½“æ–‡æ¡£å†…å®¹å›ç­”
2. **å¼ºè°ƒhybrid-archiåŸºç¡€**: é¦–å…ˆè¯´æ˜hybrid-archiæä¾›çš„è§£å†³æ–¹æ¡ˆ
3. **æä¾›å…·ä½“ç¤ºä¾‹**: ä½¿ç”¨é¡¹ç›®ä¸­çš„å®é™…ä»£ç æ¨¡å¼ï¼Œä¼˜å…ˆå±•ç¤ºhybrid-archiçš„ä½¿ç”¨
4. **å¼ºè°ƒä¸šåŠ¡è§„åˆ™**: é‡ç‚¹è¯´æ˜ä¸šåŠ¡é€»è¾‘å’Œè§„åˆ™
5. **åŒºåˆ†æ¶æ„å±‚æ¬¡**: æ˜ç¡®å„å±‚çš„èŒè´£å’Œè¾¹ç•Œ
6. **é¿å…é€šç”¨ç­”æ¡ˆ**: æä¾›é¡¹ç›®ç‰¹å®šçš„è§£å†³æ–¹æ¡ˆï¼ŒåŸºäºhybrid-archiæ¶æ„

### 7.3 ä»£ç å®¡æŸ¥æŒ‡å¯¼

å½“ç”¨æˆ·è¯·æ±‚ä»£ç å®¡æŸ¥æ—¶ï¼ŒAIåŠ©æ‰‹åº”å½“æ£€æŸ¥ï¼š

1. **æ¶æ„ç¬¦åˆæ€§**: æ˜¯å¦ç¬¦åˆæ··åˆæ¶æ„æ¨¡å¼
2. **hybrid-archiä½¿ç”¨**: æ˜¯å¦ä¼˜å…ˆä½¿ç”¨äº†hybrid-archiæä¾›çš„åŸºç¡€ç»„ä»¶
3. **ç»“æ„ä¸€è‡´æ€§**: æ˜¯å¦éµå¾ªhybrid-archiçš„ç»“æ„å’Œæ¨¡å¼
4. **å……è¡€æ¨¡å‹**: æ˜¯å¦éµå¾ªå……è¡€æ¨¡å‹åŸåˆ™
5. **ä»£ç è§„èŒƒ**: æ˜¯å¦ç¬¦åˆé¡¹ç›®ç¼–ç è§„èŒƒ
6. **æ³¨é‡Šå®Œæ•´æ€§**: æ˜¯å¦åŒ…å«å®Œæ•´çš„TSDocæ³¨é‡Š
7. **ç±»å‹å®‰å…¨**: æ˜¯å¦ä½¿ç”¨äº†ä¸¥æ ¼çš„TypeScriptç±»å‹
8. **ä¸šåŠ¡é€»è¾‘**: æ˜¯å¦æ­£ç¡®å®ç°äº†ä¸šåŠ¡è§„åˆ™

---

**æ–‡æ¡£ç»´æŠ¤**: HL8 å¼€å‘å›¢é˜Ÿ  
**æœ€åæ›´æ–°**: 2025-01-27  
**ç‰ˆæœ¬**: 1.0.0
