# SAAS-CORE é¡¹ç›®ç»“æ„ä¸æ¨¡å—èŒè´£

> **ç‰ˆæœ¬**: 1.0.0 | **åˆ›å»ºæ—¥æœŸ**: 2025-01-27 | **æ¨¡å—**: packages/saas-core

---

## ğŸ“‹ ç›®å½•

- [1. ç›®å½•ç»“æ„](#1-ç›®å½•ç»“æ„)
- [2. æ¨¡å—èŒè´£](#2-æ¨¡å—èŒè´£)
- [3. åˆ†å±‚æ¶æ„è¯´æ˜](#3-åˆ†å±‚æ¶æ„è¯´æ˜)

---

## 1. ç›®å½•ç»“æ„

### 1.1 å®Œæ•´ç›®å½•ç»“æ„

```text
packages/saas-core/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ domain/                    # é¢†åŸŸå±‚
â”‚   â”‚   â”œâ”€â”€ events/               # é¢†åŸŸäº‹ä»¶
â”‚   â”‚   â”œâ”€â”€ services/             # é¢†åŸŸæœåŠ¡
â”‚   â”‚   â”œâ”€â”€ rules/                # ä¸šåŠ¡è§„åˆ™
â”‚   â”‚   â”œâ”€â”€ value-objects/        # å€¼å¯¹è±¡
â”‚   â”‚   â”œâ”€â”€ tenant/               # ç§Ÿæˆ·å­é¢†åŸŸ
â”‚   â”‚   â”‚   â”œâ”€â”€ entities/         # ç§Ÿæˆ·å®ä½“
â”‚   â”‚   â”‚   â””â”€â”€ aggregates/       # ç§Ÿæˆ·èšåˆæ ¹
â”‚   â”‚   â”œâ”€â”€ user/                 # ç”¨æˆ·å­é¢†åŸŸ
â”‚   â”‚   â”‚   â”œâ”€â”€ entities/         # ç”¨æˆ·å®ä½“
â”‚   â”‚   â”‚   â””â”€â”€ aggregates/       # ç”¨æˆ·èšåˆæ ¹
â”‚   â”‚   â”œâ”€â”€ organization/         # ç»„ç»‡å­é¢†åŸŸ
â”‚   â”‚   â””â”€â”€ department/           # éƒ¨é—¨å­é¢†åŸŸ
â”‚   â”œâ”€â”€ application/              # åº”ç”¨å±‚
â”‚   â”‚   â”œâ”€â”€ commands/             # å‘½ä»¤
â”‚   â”‚   â”œâ”€â”€ queries/              # æŸ¥è¯¢
â”‚   â”‚   â”œâ”€â”€ handlers/             # å¤„ç†å™¨
â”‚   â”‚   â””â”€â”€ services/             # åº”ç”¨æœåŠ¡
â”‚   â”œâ”€â”€ infrastructure/           # åŸºç¡€è®¾æ–½å±‚
â”‚   â”‚   â”œâ”€â”€ repositories/         # ä»“å‚¨å®ç°
â”‚   â”‚   â”œâ”€â”€ events/               # äº‹ä»¶å¤„ç†
â”‚   â”‚   â””â”€â”€ persistence/          # æŒä¹…åŒ–
â”‚   â”œâ”€â”€ interfaces/               # æ¥å£å±‚
â”‚   â”‚   â”œâ”€â”€ rest/                 # REST API
â”‚   â”‚   â”œâ”€â”€ graphql/              # GraphQL API
â”‚   â”‚   â””â”€â”€ websocket/            # WebSocket
â”‚   â”œâ”€â”€ config/                   # é…ç½®
â”‚   â”œâ”€â”€ constants/                # å¸¸é‡
â”‚   â””â”€â”€ saas-core.module.ts       # ä¸»æ¨¡å—
â”œâ”€â”€ test/                         # æµ‹è¯•
â”œâ”€â”€ docs/                         # æ–‡æ¡£
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â””â”€â”€ README.md
```

### 1.2 æ ¸å¿ƒæ–‡ä»¶è¯´æ˜

#### 1.2.1 é…ç½®æ–‡ä»¶

- `package.json`: é¡¹ç›®ä¾èµ–å’Œè„šæœ¬é…ç½®
- `tsconfig.json`: TypeScript ç¼–è¯‘é…ç½®
- `jest.config.js`: æµ‹è¯•æ¡†æ¶é…ç½®

#### 1.2.2 ä¸»æ¨¡å—æ–‡ä»¶

- `saas-core.module.ts`: NestJS ä¸»æ¨¡å—ï¼Œé›†æˆæ‰€æœ‰å­æ¨¡å—

#### 1.2.3 å¸¸é‡æ–‡ä»¶

- `constants/business.constants.ts`: ä¸šåŠ¡ç›¸å…³å¸¸é‡
- `constants/technical.constants.ts`: æŠ€æœ¯ç›¸å…³å¸¸é‡

---

## 2. æ¨¡å—èŒè´£

### 2.1 é¢†åŸŸå±‚ (Domain Layer)

#### 2.1.1 é¢†åŸŸå±‚ç»„ä»¶ç»“æ„

```text
é¢†åŸŸå±‚ (Domain Layer)
â”œâ”€â”€ å®ä½“ (Entities)
â”‚   â”œâ”€â”€ èšåˆæ ¹ (Aggregate Roots) - ç®¡ç†è€…
â”‚   â””â”€â”€ å†…éƒ¨å®ä½“ (Internal Entities) - è¢«ç®¡ç†è€…
â”œâ”€â”€ å€¼å¯¹è±¡ (Value Objects)
â”œâ”€â”€ é¢†åŸŸæœåŠ¡ (Domain Services)
â”œâ”€â”€ é¢†åŸŸäº‹ä»¶ (Domain Events)
â””â”€â”€ ä¸šåŠ¡è§„åˆ™ (Business Rules)
```

#### 2.1.2 èšåˆæ ¹èŒè´£

- **ç®¡ç†èšåˆä¸€è‡´æ€§è¾¹ç•Œ**: ç¡®ä¿èšåˆå†…æ•°æ®ä¸€è‡´æ€§
- **åè°ƒå†…éƒ¨å®ä½“æ“ä½œ**: é€šè¿‡æŒ‡ä»¤æ¨¡å¼åè°ƒå®ä½“
- **å‘å¸ƒé¢†åŸŸäº‹ä»¶**: ç®¡ç†äº‹ä»¶çš„ç”Ÿå‘½å‘¨æœŸ
- **éªŒè¯ä¸šåŠ¡è§„åˆ™**: ç¡®ä¿ä¸šåŠ¡è§„åˆ™çš„æ­£ç¡®æ‰§è¡Œ

#### 2.1.3 å®ä½“èŒè´£

- **æ‰§è¡Œå…·ä½“ä¸šåŠ¡æ“ä½œ**: å®ç°å…·ä½“çš„ä¸šåŠ¡é€»è¾‘
- **ç»´æŠ¤è‡ªèº«çŠ¶æ€**: ç®¡ç†å®ä½“çš„çŠ¶æ€å˜æ›´
- **éµå¾ªèšåˆæ ¹æŒ‡ä»¤**: å“åº”èšåˆæ ¹çš„æŒ‡ä»¤
- **å®ç°ä¸šåŠ¡é€»è¾‘**: åŒ…å«æ ¸å¿ƒä¸šåŠ¡è§„åˆ™

#### 2.1.4 å€¼å¯¹è±¡ç‰¹ç‚¹

- **ä¸å¯å˜æ€§**: åˆ›å»ºåä¸èƒ½ä¿®æ”¹
- **ç›¸ç­‰æ€§**: åŸºäºå±æ€§å€¼æ¯”è¾ƒç›¸ç­‰æ€§
- **éªŒè¯é€»è¾‘**: åŒ…å«æ•°æ®å®Œæ•´æ€§éªŒè¯

#### 2.1.5 é¢†åŸŸæœåŠ¡ç”¨é€”

- **è·¨èšåˆä¸šåŠ¡é€»è¾‘**: å¤„ç†æ¶‰åŠå¤šä¸ªèšåˆçš„å¤æ‚ä¸šåŠ¡
- **å¤–éƒ¨æœåŠ¡é›†æˆ**: å°è£…å¤–éƒ¨æœåŠ¡çš„è°ƒç”¨
- **å¤æ‚è®¡ç®—**: æ‰§è¡Œå¤æ‚çš„ä¸šåŠ¡è®¡ç®—

#### 2.1.6 é¢†åŸŸäº‹ä»¶ç‰¹ç‚¹

- **äº‹ä»¶å®šä¹‰**: æ˜ç¡®å®šä¹‰æ‰€æœ‰é¢†åŸŸäº‹ä»¶
- **äº‹ä»¶æ•°æ®**: åŒ…å«è¶³å¤Ÿçš„æ•°æ®ç”¨äºé‡å»ºçŠ¶æ€
- **äº‹ä»¶ç‰ˆæœ¬**: æ”¯æŒäº‹ä»¶ç‰ˆæœ¬æ¼”è¿›
- **äº‹ä»¶è·¯ç”±**: æ”¯æŒäº‹ä»¶çš„è·¯ç”±å’Œåˆ†å‘

### 2.2 åº”ç”¨å±‚ (Application Layer)

#### 2.2.1 åº”ç”¨å±‚ç»„ä»¶ç»“æ„

```text
åº”ç”¨å±‚ (Application Layer) - ç”¨ä¾‹ä¸ºä¸­å¿ƒ
â”œâ”€â”€ ç”¨ä¾‹æœåŠ¡ (Use Case Services) - æ ¸å¿ƒç»„ä»¶
â”‚   â”œâ”€â”€ åˆ›å»ºç§Ÿæˆ·ç”¨ä¾‹ (CreateTenantUseCase)
â”‚   â”œâ”€â”€ æ¿€æ´»ç§Ÿæˆ·ç”¨ä¾‹ (ActivateTenantUseCase)
â”‚   â”œâ”€â”€ æŸ¥è¯¢ç§Ÿæˆ·ç”¨ä¾‹ (GetTenantUseCase)
â”‚   â””â”€â”€ ç§Ÿæˆ·åˆ—è¡¨ç”¨ä¾‹ (GetTenantListUseCase)
â”œâ”€â”€ å‘½ä»¤å¤„ç†å™¨ (Command Handlers) - ç”¨ä¾‹å®ç°
â”œâ”€â”€ æŸ¥è¯¢å¤„ç†å™¨ (Query Handlers) - ç”¨ä¾‹å®ç°
â””â”€â”€ äº‹ä»¶å¤„ç†å™¨ (Event Handlers) - ç”¨ä¾‹å®ç°
```

#### 2.2.2 ç”¨ä¾‹ä¸ºä¸­å¿ƒçš„ç¬¬ä¸€åŸåˆ™

åº”ç”¨å±‚æ˜¯ Hybrid Architecture çš„åè°ƒå±‚ï¼Œè´Ÿè´£åè°ƒé¢†åŸŸå¯¹è±¡å®Œæˆç‰¹å®šçš„ä¸šåŠ¡ç”¨ä¾‹ã€‚åº”ç”¨å±‚åº”è¯¥ï¼š

- **ç”¨ä¾‹ä¸ºä¸­å¿ƒ**: ä»¥ä¸šåŠ¡ç”¨ä¾‹ä¸ºæ ¸å¿ƒï¼Œæ¯ä¸ªç”¨ä¾‹å¯¹åº”ä¸€ä¸ªåº”ç”¨æœåŠ¡
- **ç”¨ä¾‹é€»è¾‘**: åº”ç”¨å±‚çš„å…³æ³¨ç‚¹æ˜¯ç”¨ä¾‹çš„é€»è¾‘ï¼Œå³åè°ƒé¢†åŸŸå¯¹è±¡å®Œæˆä¸šåŠ¡åœºæ™¯çš„æµç¨‹
- **æ— ä¸šåŠ¡é€»è¾‘**: ä¸åŒ…å«å…·ä½“çš„ä¸šåŠ¡é€»è¾‘ï¼Œåªè´Ÿè´£åè°ƒ
- **ç”¨ä¾‹é©±åŠ¨**: æ¯ä¸ªåº”ç”¨æœåŠ¡å¯¹åº”ä¸€ä¸ªæˆ–å¤šä¸ªä¸šåŠ¡ç”¨ä¾‹
- **äº‹åŠ¡è¾¹ç•Œ**: ç®¡ç†äº‹åŠ¡è¾¹ç•Œå’Œä¸€è‡´æ€§
- **ä¾èµ–æ³¨å…¥**: é€šè¿‡ä¾èµ–æ³¨å…¥ç®¡ç†ç»„ä»¶ä¾èµ–

#### 2.2.3 ç”¨ä¾‹è®¾è®¡æ‰¿è¯º

**ç”¨ä¾‹ï¼ˆUse-Caseï¼‰æ˜¯ Clean Architecture çš„é‡è¦æ¦‚å¿µ**ï¼š

**ç”¨ä¾‹ï¼ˆUse-Caseï¼‰ä¸ä»…ä»…æ˜¯å‘½ååå¥½ï¼Œæ›´æ˜¯ä¸€ç§è®¾è®¡æ‰¿è¯º**ï¼š

1. **è®¾è®¡æ‰¿è¯º**: ä½¿ç”¨ `XxxUseCase` å‘½åæ˜¯å¯¹å•ä¸€èŒè´£åŸåˆ™çš„æ‰¿è¯º
2. **ä¸šåŠ¡åœºæ™¯ä¸“æ³¨**: æ¯ä¸ªç”¨ä¾‹ç±»åªå…³æ³¨ä¸€ä¸ªå…·ä½“çš„ä¸šåŠ¡åœºæ™¯
3. **ä»£ç æ¸…æ™°**: ç”¨ä¾‹å‘½åç›´æ¥åæ˜ ä¸šåŠ¡æ„å›¾ï¼Œä»£ç æ›´åŠ æ¸…æ™°
4. **å¯ç»´æŠ¤æ€§**: å•ä¸€èŒè´£ä½¿å¾—ä»£ç æ›´å®¹æ˜“ç»´æŠ¤å’Œä¿®æ”¹
5. **å¯æµ‹è¯•æ€§**: æ¯ä¸ªç”¨ä¾‹å¯ä»¥ç‹¬ç«‹æµ‹è¯•ï¼Œæµ‹è¯•æ›´åŠ ç²¾ç¡®

#### 2.2.4 åº”ç”¨å±‚èŒè´£

- **ç”¨ä¾‹æœåŠ¡**: å®ç°å…·ä½“çš„ä¸šåŠ¡ç”¨ä¾‹ï¼Œåè°ƒé¢†åŸŸå¯¹è±¡
- **å‘½ä»¤å¤„ç†å™¨**: å¤„ç†å†™æ“ä½œè¯·æ±‚ï¼Œå®ç°å‘½ä»¤ç«¯ç”¨ä¾‹
- **æŸ¥è¯¢å¤„ç†å™¨**: å¤„ç†è¯»æ“ä½œè¯·æ±‚ï¼Œå®ç°æŸ¥è¯¢ç«¯ç”¨ä¾‹
- **äº‹ä»¶å¤„ç†å™¨**: å¤„ç†é¢†åŸŸäº‹ä»¶ï¼Œå®ç°äº‹ä»¶é©±åŠ¨ç”¨ä¾‹
- **åº”ç”¨æœåŠ¡**: åè°ƒå¤šä¸ªèšåˆçš„æ“ä½œ
- **äº‹åŠ¡ç®¡ç†**: ç®¡ç†äº‹åŠ¡è¾¹ç•Œå’Œä¸€è‡´æ€§
- **ä¾èµ–æ³¨å…¥**: é€šè¿‡ä¾èµ–æ³¨å…¥ç®¡ç†ç»„ä»¶ä¾èµ–

### 2.3 åŸºç¡€è®¾æ–½å±‚ (Infrastructure Layer)

#### 2.3.1 åŸºç¡€è®¾æ–½å±‚ç»„ä»¶ç»“æ„

```text
åŸºç¡€è®¾æ–½å±‚ (Infrastructure Layer)
â”œâ”€â”€ é€‚é…å™¨ (Adapters)
â”‚   â”œâ”€â”€ ç«¯å£é€‚é…å™¨ (Port Adapters)
â”‚   â”œâ”€â”€ ä»“å‚¨é€‚é…å™¨ (Repository Adapters)
â”‚   â”œâ”€â”€ æœåŠ¡é€‚é…å™¨ (Service Adapters)
â”‚   â””â”€â”€ äº‹ä»¶å­˜å‚¨é€‚é…å™¨ (Event Store Adapters)
â”œâ”€â”€ äº‹ä»¶æº¯æº (Event Sourcing)
â”‚   â”œâ”€â”€ äº‹ä»¶å­˜å‚¨å®ç° (Event Store Implementation)
â”‚   â””â”€â”€ å¿«ç…§å­˜å‚¨å®ç° (Snapshot Store Implementation)
â”œâ”€â”€ äº‹ä»¶é©±åŠ¨æ¶æ„ (Event-Driven Architecture)
â”‚   â”œâ”€â”€ æ­»ä¿¡é˜Ÿåˆ— (Dead Letter Queue)
â”‚   â””â”€â”€ äº‹ä»¶ç›‘æ§ (Event Monitor)
â”œâ”€â”€ å·¥å‚ (Factories)
â”‚   â”œâ”€â”€ åŸºç¡€è®¾æ–½å·¥å‚ (Infrastructure Factory)
â”‚   â””â”€â”€ åŸºç¡€è®¾æ–½ç®¡ç†å™¨ (Infrastructure Manager)
â””â”€â”€ æ˜ å°„å™¨ (Mappers)
    â”œâ”€â”€ é¢†åŸŸæ˜ å°„å™¨ (Domain Mappers)
    â””â”€â”€ DTOæ˜ å°„å™¨ (DTO Mappers)
```

#### 2.3.2 é€‚é…å™¨æ¨¡å¼å®ç°

åŸºç¡€è®¾æ–½å±‚æ˜¯ Hybrid Architecture çš„æŠ€æœ¯å®ç°å±‚ï¼Œè´Ÿè´£æä¾›æŠ€æœ¯æœåŠ¡å’Œå¤–éƒ¨ç³»ç»Ÿé›†æˆã€‚åŸºç¡€è®¾æ–½å±‚åº”è¯¥ï¼š

- **æŠ€æœ¯å®ç°é›†ä¸­**: æ‰€æœ‰æŠ€æœ¯å®ç°åœ¨åŸºç¡€è®¾æ–½å±‚ç»Ÿä¸€ç®¡ç†
- **å¤–éƒ¨ä¾èµ–éš”ç¦»**: éš”ç¦»å¤–éƒ¨ç³»ç»Ÿä¾èµ–
- **é€‚é…å™¨æ¨¡å¼**: ä½¿ç”¨é€‚é…å™¨æ¨¡å¼å®ç°æ¥å£é€‚é…
- **å¯æ›¿æ¢æ€§**: æ”¯æŒæŠ€æœ¯å®ç°çš„æ›¿æ¢å’Œå‡çº§

#### 2.3.3 äº‹ä»¶æº¯æºæ”¯æŒ

**äº‹ä»¶å­˜å‚¨å®ç°**:

- **äº‹ä»¶æŒä¹…åŒ–**: æ”¯æŒäº‹ä»¶çš„æŒä¹…åŒ–å­˜å‚¨
- **äº‹ä»¶æ£€ç´¢**: æ”¯æŒäº‹ä»¶çš„æŸ¥è¯¢å’Œæ£€ç´¢
- **å¿«ç…§ç®¡ç†**: æ”¯æŒèšåˆçŠ¶æ€çš„å¿«ç…§æœºåˆ¶
- **å¹¶å‘æ§åˆ¶**: æ”¯æŒä¹è§‚å¹¶å‘æ§åˆ¶

#### 2.3.4 äº‹ä»¶é©±åŠ¨æ”¯æŒ

**æ¶ˆæ¯é˜Ÿåˆ—å®ç°**:

- **äº‹ä»¶å‘å¸ƒ**: æ”¯æŒäº‹ä»¶çš„å¼‚æ­¥å‘å¸ƒ
- **äº‹ä»¶è®¢é˜…**: æ”¯æŒäº‹ä»¶çš„è®¢é˜…å’Œå¤„ç†
- **æ­»ä¿¡é˜Ÿåˆ—**: æ”¯æŒå¤±è´¥äº‹ä»¶çš„å¤„ç†
- **äº‹ä»¶ç›‘æ§**: æ”¯æŒäº‹ä»¶çš„ç›‘æ§å’Œç»Ÿè®¡

#### 2.3.5 å¤šç§Ÿæˆ·æ”¯æŒ

**ç§Ÿæˆ·éš”ç¦»**:

- **æ•°æ®éš”ç¦»**: ç¡®ä¿ç§Ÿæˆ·æ•°æ®çš„ç‰©ç†éš”ç¦»
- **ç¼“å­˜éš”ç¦»**: æ”¯æŒç§Ÿæˆ·çº§åˆ«çš„ç¼“å­˜éš”ç¦»
- **æ¶ˆæ¯éš”ç¦»**: æ”¯æŒç§Ÿæˆ·çº§åˆ«çš„æ¶ˆæ¯éš”ç¦»
- **ç›‘æ§éš”ç¦»**: æ”¯æŒç§Ÿæˆ·çº§åˆ«çš„ç›‘æ§éš”ç¦»

#### 2.3.6 åŸºç¡€è®¾æ–½å±‚èŒè´£

- **é€‚é…å™¨å®ç°**: å®ç°ç«¯å£é€‚é…å™¨ã€ä»“å‚¨é€‚é…å™¨ã€æœåŠ¡é€‚é…å™¨
- **äº‹ä»¶å­˜å‚¨**: å®ç°äº‹ä»¶æº¯æºçš„äº‹ä»¶å­˜å‚¨å’Œå¿«ç…§æœºåˆ¶
- **äº‹ä»¶é©±åŠ¨**: å®ç°äº‹ä»¶é©±åŠ¨çš„æ¶ˆæ¯é˜Ÿåˆ—å’Œæ­»ä¿¡é˜Ÿåˆ—
- **æ•°æ®æ˜ å°„**: å®ç°é¢†åŸŸå¯¹è±¡ä¸æ•°æ®æ¨¡å‹çš„æ˜ å°„
- **å¤–éƒ¨é›†æˆ**: é›†æˆå¤–éƒ¨æœåŠ¡å’Œç¬¬ä¸‰æ–¹API
- **æŠ€æœ¯å®ç°**: æä¾›æ‰€æœ‰æŠ€æœ¯å®ç°çš„å…·ä½“å®ç°

### 2.4 æ¥å£å±‚ (Interface Layer)

#### 2.4.1 æ¥å£å±‚ç»„ä»¶ç»“æ„

```text
æ¥å£å±‚ (Interface Layer)
â”œâ”€â”€ æ§åˆ¶å™¨ç³»ç»Ÿ (Controllers)
â”‚   â”œâ”€â”€ RESTæ§åˆ¶å™¨ (REST Controllers)
â”‚   â”œâ”€â”€ GraphQLè§£æå™¨ (GraphQL Resolvers)
â”‚   â”œâ”€â”€ WebSocketå¤„ç†å™¨ (WebSocket Handlers)
â”‚   â””â”€â”€ CLIå‘½ä»¤ (CLI Commands)
â”œâ”€â”€ APIæ¥å£ç³»ç»Ÿ (API System)
â”‚   â”œâ”€â”€ ç‰ˆæœ¬æ§åˆ¶ (Versioning)
â”‚   â”œâ”€â”€ æ–‡æ¡£ç”Ÿæˆ (Documentation)
â”‚   â”œâ”€â”€ ç›‘æ§ç»Ÿè®¡ (Monitoring)
â”‚   â””â”€â”€ æµ‹è¯•æ”¯æŒ (Testing)
â”œâ”€â”€ éªŒè¯å™¨ç³»ç»Ÿ (Validators)
â”‚   â”œâ”€â”€ ä¸šåŠ¡éªŒè¯å™¨ (Business Validators)
â”‚   â”œâ”€â”€ æ•°æ®éªŒè¯å™¨ (Data Validators)
â”‚   â”œâ”€â”€ æ ¼å¼éªŒè¯å™¨ (Format Validators)
â”‚   â””â”€â”€ å®‰å…¨éªŒè¯å™¨ (Security Validators)
â”œâ”€â”€ è½¬æ¢å™¨ç³»ç»Ÿ (Transformers)
â”‚   â”œâ”€â”€ æ•°æ®è½¬æ¢å™¨ (Data Transformers)
â”‚   â”œâ”€â”€ æ ¼å¼è½¬æ¢å™¨ (Format Transformers)
â”‚   â”œâ”€â”€ ç±»å‹è½¬æ¢å™¨ (Type Transformers)
â”‚   â””â”€â”€ åºåˆ—åŒ–è½¬æ¢å™¨ (Serialization Transformers)
â”œâ”€â”€ ä¸­é—´ä»¶ç³»ç»Ÿ (Middleware)
â”‚   â”œâ”€â”€ è®¤è¯ä¸­é—´ä»¶ (Auth Middleware)
â”‚   â”œâ”€â”€ æ—¥å¿—ä¸­é—´ä»¶ (Logging Middleware)
â”‚   â”œâ”€â”€ æ€§èƒ½ä¸­é—´ä»¶ (Performance Middleware)
â”‚   â””â”€â”€ å®‰å…¨ä¸­é—´ä»¶ (Security Middleware)
â””â”€â”€ è£…é¥°å™¨ç³»ç»Ÿ (Decorators)
    â”œâ”€â”€ éªŒè¯è£…é¥°å™¨ (Validation Decorators)
    â”œâ”€â”€ ç¼“å­˜è£…é¥°å™¨ (Cache Decorators)
    â”œâ”€â”€ æƒé™è£…é¥°å™¨ (Permission Decorators)
    â””â”€â”€ ç›‘æ§è£…é¥°å™¨ (Monitoring Decorators)
```

#### 2.4.2 åè®®é€‚é…æ”¯æŒ

æ¥å£å±‚æ˜¯ Hybrid Architecture çš„ç”¨æˆ·äº¤äº’å±‚ï¼Œè´Ÿè´£å¤„ç†å¤–éƒ¨è¯·æ±‚å’Œå“åº”ã€‚æ¥å£å±‚åº”è¯¥ï¼š

- **åè®®é€‚é…**: é€‚é…ä¸åŒçš„é€šä¿¡åè®®ï¼ˆHTTPã€GraphQLã€WebSocketç­‰ï¼‰
- **è¯·æ±‚å¤„ç†**: å¤„ç†ç”¨æˆ·è¯·æ±‚å¹¶è½¬æ¢ä¸ºåº”ç”¨å±‚å¯ç†è§£çš„æ ¼å¼
- **å“åº”æ ¼å¼åŒ–**: å°†åº”ç”¨å±‚ç»“æœæ ¼å¼åŒ–ä¸ºç”¨æˆ·å¯ç†è§£çš„å“åº”
- **å®‰å…¨æ§åˆ¶**: æä¾›è®¤è¯ã€æˆæƒã€è¾“å…¥éªŒè¯ç­‰å®‰å…¨åŠŸèƒ½

#### 2.4.3 å‘½ä»¤æŸ¥è¯¢åˆ†ç¦»æ”¯æŒ

**æ¥å£åˆ†ç¦»**:

- **å‘½ä»¤æ¥å£**: å¤„ç†å†™æ“ä½œï¼Œè¿”å›å‘½ä»¤æ‰§è¡Œç»“æœ
- **æŸ¥è¯¢æ¥å£**: å¤„ç†è¯»æ“ä½œï¼Œè¿”å›æŸ¥è¯¢ç»“æœ
- **äº‹ä»¶æ¥å£**: å¤„ç†äº‹ä»¶è®¢é˜…å’Œæ¨é€

#### 2.4.4 å¤šåè®®æ”¯æŒ

**åè®®é€‚é…**:

- **REST API**: æ”¯æŒæ ‡å‡†çš„RESTfulæ¥å£
- **GraphQL**: æ”¯æŒçµæ´»çš„æŸ¥è¯¢å’Œå˜æ›´
- **WebSocket**: æ”¯æŒå®æ—¶é€šä¿¡å’Œäº‹ä»¶æ¨é€
- **CLI**: æ”¯æŒå‘½ä»¤è¡Œå·¥å…·å’Œè„šæœ¬

#### 2.4.5 å¤šç§Ÿæˆ·æ”¯æŒ

**ç§Ÿæˆ·éš”ç¦»**:

- **ç§Ÿæˆ·è¯†åˆ«**: ä»è¯·æ±‚ä¸­è¯†åˆ«ç§Ÿæˆ·ä¿¡æ¯
- **æ•°æ®éš”ç¦»**: ç¡®ä¿ç§Ÿæˆ·æ•°æ®çš„å®‰å…¨éš”ç¦»
- **æƒé™æ§åˆ¶**: åŸºäºç§Ÿæˆ·çš„æƒé™éªŒè¯

#### 2.4.6 æ¥å£å±‚èŒè´£

- **æ§åˆ¶å™¨å®ç°**: å®ç°RESTã€GraphQLã€WebSocketç­‰æ§åˆ¶å™¨
- **éªŒè¯å™¨å®ç°**: å®ç°è¾“å…¥éªŒè¯ã€ä¸šåŠ¡éªŒè¯ã€å®‰å…¨éªŒè¯
- **è½¬æ¢å™¨å®ç°**: å®ç°æ•°æ®è½¬æ¢ã€æ ¼å¼è½¬æ¢ã€ç±»å‹è½¬æ¢
- **ä¸­é—´ä»¶å®ç°**: å®ç°è®¤è¯ã€æ—¥å¿—ã€æ€§èƒ½ã€å®‰å…¨ä¸­é—´ä»¶
- **è£…é¥°å™¨å®ç°**: å®ç°éªŒè¯ã€ç¼“å­˜ã€æƒé™ã€ç›‘æ§è£…é¥°å™¨
- **APIç®¡ç†**: ç‰ˆæœ¬æ§åˆ¶ã€æ–‡æ¡£ç”Ÿæˆã€ç›‘æ§ç»Ÿè®¡

---

## 3. åˆ†å±‚æ¶æ„è¯´æ˜

### 3.1 æ¶æ„åˆ†å±‚å›¾

```mermaid
graph TB
    subgraph "SAAS-CORE æ¨¡å—"
        subgraph "æ¥å£å±‚ (Interface Layer)"
            REST[REST API]
            GraphQL[GraphQL API]
            WS[WebSocket]
        end
        
        subgraph "åº”ç”¨å±‚ (Application Layer)"
            CH[Command Handler]
            QH[Query Handler]
            EH[Event Handler]
        end
        
        subgraph "é¢†åŸŸå±‚ (Domain Layer)"
            AR[Aggregate Root]
            E[Entity]
            VO[Value Object]
            DS[Domain Service]
            DE[Domain Event]
        end
        
        subgraph "åŸºç¡€è®¾æ–½å±‚ (Infrastructure Layer)"
            DB[(Database)]
            Cache[(Redis Cache)]
            MQ[Message Queue]
            ES[Event Store]
        end
    end
    
    REST --> CH
    GraphQL --> QH
    WS --> EH
    CH --> AR
    QH --> AR
    EH --> AR
    AR --> DB
    AR --> Cache
    AR --> MQ
    DE --> ES
```

### 3.2 ä¾èµ–æ–¹å‘

- **ä¾èµ–å€’ç½®**: å¤–å±‚ä¾èµ–å†…å±‚ï¼Œå†…å±‚ä¸ä¾èµ–å¤–å±‚
- **æ¥å£éš”ç¦»**: é€šè¿‡æ¥å£å®ç°å±‚é—´è§£è€¦
- **å•ä¸€èŒè´£**: æ¯å±‚åªè´Ÿè´£è‡ªå·±çš„èŒè´£
- **å¼€é—­åŸåˆ™**: å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­

### 3.3 æ•°æ®æµå‘

1. **è¯·æ±‚æµå‘**: æ¥å£å±‚ â†’ åº”ç”¨å±‚ â†’ é¢†åŸŸå±‚ â†’ åŸºç¡€è®¾æ–½å±‚
2. **å“åº”æµå‘**: åŸºç¡€è®¾æ–½å±‚ â†’ é¢†åŸŸå±‚ â†’ åº”ç”¨å±‚ â†’ æ¥å£å±‚
3. **äº‹ä»¶æµå‘**: é¢†åŸŸå±‚ â†’ åŸºç¡€è®¾æ–½å±‚ â†’ åº”ç”¨å±‚ï¼ˆäº‹ä»¶å¤„ç†ï¼‰

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [é¡¹ç›®æ¦‚è¿°ä¸æ¶æ„è®¾è®¡](./01-overview-and-architecture.md)
- [æŠ€æœ¯æ ˆé€‰æ‹©ä¸ä¾èµ–ç®¡ç†](./02-tech-stack-and-dependencies.md)
- [é¢†åŸŸå±‚å¼€å‘æŒ‡å—](./04-domain-layer-development.md)
- [åº”ç”¨å±‚å¼€å‘æŒ‡å—](./05-application-layer-development.md)
- [åŸºç¡€è®¾æ–½å±‚å¼€å‘æŒ‡å—](./06-infrastructure-layer-development.md)
- [æ¥å£å±‚å¼€å‘æŒ‡å—](./07-interface-layer-development.md)
- [ä¸šåŠ¡åŠŸèƒ½æ¨¡å—å¼€å‘](./08-business-modules.md)
- [æµ‹è¯•ç­–ç•¥ä¸éƒ¨ç½²è¿ç»´](./09-testing-and-deployment.md)
- [æœ€ä½³å®è·µä¸å¸¸è§é—®é¢˜](./10-best-practices-and-faq.md)
